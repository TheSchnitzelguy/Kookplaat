int latchPin = 8;
int dataPin = 9;
int clockPin = 7;

void setup() {
  // put your setup code here, to run once:
Serial.begin(9600);
Serial.print("BEGIN");
pinMode(latchPin, OUTPUT);
pinMode(clockPin, OUTPUT);
pinMode(dataPin, INPUT);
}



void loop()
{

digitalWrite(latchPin, HIGH);
delayMicroseconds(20);
digitalWrite(latchPin, LOW);
 
 int buttonsPushed = shiftIn(dataPin, clockPin, MSBFIRST);

  int lastButton = buttonsPushed;
  int activeButton = 0;
  Serial.println(buttonsPushed);  

  if(lastButton != buttonsPushed){
    switch (buttonsPushed){
      case 1  : Serial.print("button 1 is pushed"); 
      case 2  : Serial.print("button 2 is pushed");
      case 4  : Serial.print("button 3 is pushed");
      case 8  : Serial.print("button 4 is pushed");
      case 16 : Serial.print("button 5 is pushed");
      case 32 : Serial.print("button 6 is pushed");
      case 64 : Serial.print("button 7 is pushed");
      case 128: Serial.print("button 8 is pushed");
      default : Serial.print("non or multiple buttons are pushed");
    }
  }
}

